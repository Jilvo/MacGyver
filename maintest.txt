
#V0.4
#Import the labyrinth's file
balise_player=0
balise_bad_guy=0
game_not_end=0

from random import randint
#print("MacGyver est situé",labyrinth.index('*'));
#for i in range(0,16):
 #   if "m" in labyrinth[i][balise_player]:
  #      print("MacGyver is in the list",i,"at the position",labyrinth[i].index("m"));
   #     break
    #else:
     #   #print("searching...");
      #  pass
    #balise_player=0
class labyrinth():
#create a class for the labyrinth  
    def __init__(self, fichier):
        self.fichier = fichier
        self.structure = 0
	
    def generate(self):
        with open('macgyver/labyrinth.txt') as fichier:
            global structure_labyrinth
            structure_labyrinth=[]
            line = fichier.readline()
            cnt = 0
            while line:
                print([line[i:i+1] for i in range(0,len(line),1)])
                print("Line {}: {}".format((cnt+1), line.strip()))
                structure_labyrinth.append([line[i:i+1] for i in range(0,len(line),1)])
                if '\n' in line:
                    structure_labyrinth[cnt].remove('\n')
                    #print("present")

                line = fichier.readline()
                cnt += 1
                
            print(structure_labyrinth)
            fichier.close()
    def find_player(self):
#find MacGyver    
        for y,lst in enumerate(structure_labyrinth):
            for x,color in enumerate(lst):
                if color == "m":
                    # print("MacGyver is in ",y,"list at the", x,"position")
                    global list_macgyver
                    macgyver_position_x=x
                    macgyver_position_y=y
                    list_macgyver=[]
                    list_macgyver.append(x)
                    list_macgyver.append(y)
        
#find the bad guy
        for y,lst in enumerate(structure_labyrinth):
            for x,color in enumerate(lst):
                if color == "b":
                    #  print("The bad guy is in ",y,"list at the", x,"position")
                    global list_badguy
                    list_badguy=[]
                    list_badguy.append(x)
                    list_badguy.append(y)
                    pass
        
        
        # print(structure_labyrinth)

        # for y,lst in enumerate(structure_labyrinth):
        #     for x,color in enumerate(lst):
        #         if color == "e":
        #             # print("the ether is in ",y,"list at the", x,"position")

        #             list_ether=[]
        #             list_ether.append(x)
        #             list_ether.append(y)
        #             list_item.append(list_ether)
        # for y,lst in enumerate(structure_labyrinth):
        #     for x,color in enumerate(lst):
        #         if color == "n":
        #             # print("the needle is in ",y,"list at the", x,"position")
        #             list_needle=[]
        #             list_needle.append(x)
        #             list_needle.append(y)
        #             list_item.append(list_needle)
        # for y,lst in enumerate(structure_labyrinth):
        #     for x,color in enumerate(lst):
        #         if color == "t":
        #             # print("the tube is in ",y,"list at the", x,"position")
        #             list_tube=[]
        #             list_tube.append(x)
        #             list_tube.append(y)
        #             list_item.append(list_tube)
        # if list_tube == list_needle or list_tube== list_ether:
        #     structure_labyrinth[randint(1,14)][randint(1,14)]="t"
        # elif list_needle == list_ether :
        #     structure_labyrinth[randint(1,14)][randint(1,14)]="n"
        # else:
        #     print("les 3 objets sont placés à des endroits différents")
        # print(list_item)
class Items():
    def __init__(self,nom,char,pos_x,pos_y):
        self.nom= nom
        self.char= char
        self.pos_x=pos_x
        self.pos_y=pos_y

    def set_the_object(self):
        char={}
        char['ether']='e'
        char['needle']='n'
        char['tube']='t'
        global list_item
        list_item=[]
        
        for item,char_item in char.items():
            rand_x=randint(1,13)
            rand_y=randint(1,13)
            structure_labyrinth[rand_x][rand_y]=char_item
            obj=Items(item,char_item,rand_x,rand_y)
            list_item.append(obj)
        print(list_item)


class perso():

    def deplacer(self,direction):
        x=list_macgyver[0]
        y=list_macgyver[1]
        print(list_macgyver)
        if direction == 'right':
            if structure_labyrinth[x+1][y]!='*':
                structure_labyrinth[y][x]="0"
                list_macgyver[0] += 1
                x+=1
                structure_labyrinth[y][x]="m"
                print("right")
        if direction == 'left':
            if structure_labyrinth[x-1][y]!='*':
                structure_labyrinth[y][x]="0"
                list_macgyver[0] -= 1
                x-=1
                print(x)
                structure_labyrinth[y][x]="m"
                print("left")
        if direction == 'up':
            if structure_labyrinth[x][y-1]!='*':
                structure_labyrinth[y][x]="0"
                list_macgyver[1] -= 1
                y-=1
                structure_labyrinth[y][x]="m"
                print("up")
        if direction == 'down':
            if structure_labyrinth[x][y+1]!='*':
                structure_labyrinth[y][x]="0"
                list_macgyver[1] += 1
                y+=1
                structure_labyrinth[y][x]="m"
                print("down")

            
        print(x,y)
        print(structure_labyrinth)
        

  # def replace_value(self,list_macgyver):
    # def scoring(self,list_macgyver,char):
    #     score=0
    #     for y,lst in enumerate(structure_labyrinth):
    #         for x,color in enumerate(lst):
    #             print(list_macgyver)
    #             if macgyver_position_x == list_item[x]:
    #                 if macgyver_position_y == list_item[y]
    #                 score+=1
    #                 print("Le score est passé a : ",score,"grace au ether")
                    
                # if list_macgyver == list_item[x][y]:
                #     score+=2
                #     print("Le score est passé a : ",score,"grace au needle")
                # if list_macgyver == list_item[2]:
                #     score+=3
                #     print("Le score est passé a : ",score,"grace au tube")

    


game=labyrinth('labyrinth.txt')
game.generate()
game.find_player()



# while game_not_end==0:
#     direction = input("chose direction : ")
#     deplacement=perso()
#     deplacement.deplacer(direction)
#     deplacement.scoring(list_macgyver,list_item)
#     if game_not_end==1:
#         break




    # with open('MacGyver/labyrinth.txt') as fichier:

# 	def afficher(screen):
# 			wall = pygame.image.load(image_wall).convert()
# 			macgyver = pygame.image.load(image_macgyver).convert()
# 			needle= pygame.image.load(image_needle).convert()
# 			ether= pygame.image.load(image_ether).convert()
# 			tube= pygame.image.load(image_tube).convert()
# 			badguy= pygame.image.load(image_guard).convert()

# 			for y,lst in enumerate(fichier):
# 				for x,color in enumerate(lst):
# 					position_x= lst*taille_sprite
# 					position_y= color*taille_sprite
# 					if color == "*":
# 						screen.blint(wall,(position_x,position_y))
# 					elif color == "m":
# 						screen.blint(macgyver,(position_x,position_y))
# 					elif color == "b":
# 						screen.blint(badguy,(position_x,position_y))
# 					elif color == "n":
# 						screen.blint(needle,(position_x,position_y))
# 					elif color == "t":
# 						screen.blint(tube,(position_x,position_y))
# 					elif color == "e":
# 						screen.blint(ether,(position_x,position_y))
#                   elif color == "0":
# 						screen.blint(floor,(position_x,position_y))	

#BOUCLE INFINIE